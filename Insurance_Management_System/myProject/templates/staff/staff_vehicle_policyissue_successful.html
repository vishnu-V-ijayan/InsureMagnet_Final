{% comment %} {% extends "customer_base.html" %} {% endcomment %}
{% block style %}
    {% comment %} <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"> {% endcomment %}
    <style>
        body { padding-top: 20px; }
        .card {
            border: 1px solid #007BFF; /* Blue border for the cards */
        }
        .btn {
            background-color: green; /* Change button color to green */
            border-color: green; /* Border color for button */
        }
        .btn:hover {
            background-color: darkgreen; /* Darker green on hover */
            border-color: darkgreen;
        }
        @media (max-width: 768px) {
            .row {
                flex-direction: column;
            }
            .col-md-4 {
                width: 100%; /* Full width on small screens */
                margin-bottom: 20px;
            }
        }
        .btn-center {
            display: flex;
            justify-content: center; /* Center the button */
            padding: 20px;
        }
    </style>
{% endblock style %}
{% block body %}
<body>
    <div class="container">
        <h1 class="mb-4">New Vehicle Policy Issue</h1>
        <div class="row">
            <!-- Customer Details -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">Customer Details</div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">Name: {{ customer.first_name }} {{ customer.last_name }}</li>
                        <li class="list-group-item">Address: {{ customer.address }}</li>
                        <li class="list-group-item">Phone: {{ customer.phone }}</li>
                        <li class="list-group-item">Email: {{ customer.user.email }}</li>
                        <li class="list-group-item">Aadhaar: {{ customer.aadhaar }}</li>
                        {% if customer.image %}
                        <li class="list-group-item"><img src="{{ customer.image.url }}" alt="Customer Image" style="width:100%;"></li>
                        {% endif %}
                    </ul>
                </div>
            </div>

            <!-- Vehicle Details -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">Vehicle Details</div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">Vehicle Number: {{ vehicle_policy.vehicle_number }}</li>
                        <li class="list-group-item">Vehicle Value: {{ vehicle_policy.vehicle_value }}</li>
                        <li class="list-group-item">Engine Number: {{ vehicle_policy.engine_number }}</li>
                        <li class="list-group-item">Chassis Number: {{ vehicle_policy.chassis_number }}</li>
                        <li class="list-group-item">Vehicle Size: {{ vehicle_policy.vehicle_size }}</li>
                        <li class="list-group-item">Vehicle Company: {{ vehicle_policy.vehicle_company }}</li>
                        <li class="list-group-item">Vehicle Power: {{ vehicle_policy.vehicle_power }}</li>
                        <li class="list-group-item">Manufacture Year: {{ vehicle_policy.manufacture_year }}</li>
                        <li class="list-group-item">Vehicle Type: {{ vehicle_policy.vehicle_type }}</li>
                        <li class="list-group-item">Policy Amount: {{ vehicle_policy.policy_amount }}</li>
                        {% if vehicle_policy.vehicle_photo %}
                        <li class="list-group-item"><img src="{{ vehicle_policy.vehicle_photo.url }}" alt="Vehicle Photo" style="width:100%;"></li>
                        {% endif %}
                    </ul>
                </div>
            </div>

            <!-- Policy Plan Details -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">Policy Plan Details</div>
                    {% if plan %}
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Plan Type</th>
                                <th>Plan Percentage</th>
                                <th>Specification</th>
                                <th>Depreciation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{ plan.PType }}</td>
                                <td>{{ plan.Ppercentage }}%</td>
                                <td>{{ plan.sp }}</td>
                                <td>{{ plan.depreciation }}%</td>
                            </tr>
                        </tbody>
                    </table>
                    {% else %}
                    <div class="card-body">
                        <p class="text-muted">No Plan Registered...</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Button -->
        <div class="btn-center">
            <button type="button" class="btn" id="pay-btn">Proceed to Payment</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    var options = {
       
      // Enter the Key ID generated from the Dashboard
      key: "{{ razorpay_merchant_key }}", 
       
      // Amount is in currency subunits.
      // Default currency is INR. Hence, 
      // 50000 refers to 50000 paise
      amount: "{{ razorpay_amount }}", 
      currency: "{{ currency }}",
       
      // Your/store name.
      name: "Dj Razorpay", 
       
      // Pass the `id` obtained in the response of Step 1
      order_id: "{{ razorpay_order_id }}", 
      callback_url: "{{ callback_url }}",
    };
     
    // initialise razorpay with the options.
    var rzp1 = new Razorpay(options);
     
    // add event listener to the payment button.
    document.getElementById("pay-btn").onclick = function (e) {
      rzp1.open();
      e.preventDefault();
    };
  </script>
</body>
{% endblock body %}
